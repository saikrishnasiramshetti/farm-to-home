<!DOCTYPE html>
<html>
<head>
<title>Admin Orders | Farm To Home</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#f4f6f8;
}

/* HEADER */
.header{
    background:#1aad19;
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
}

/* ORDER CARD */
.order-card{
    background:white;
    margin:15px;
    padding:15px;
    border-radius:15px;
    box-shadow:0 8px 16px rgba(0,0,0,0.1);
}

.order-card h4{
    margin-top:0;
    color:#1aad19;
}

.items{
    background:#f5f7f6;
    padding:10px;
    border-radius:10px;
    margin-top:10px;
    font-size:14px;
}

.status{
    margin-top:10px;
    font-weight:bold;
}
.status.new{ color:#ff9800; }
.status.delivered{ color:#1aad19; }

/* BUTTON */
.btn{
    margin-top:12px;
    padding:10px 14px;
    border:none;
    border-radius:8px;
    background:#1aad19;
    color:white;
    cursor:pointer;
}
.btn:disabled{
    background:#ccc;
    cursor:not-allowed;
}

/* EMPTY */
.empty{
    text-align:center;
    margin-top:60px;
    color:#777;
}
</style>
</head>

<body>

<div class="header">User Orders ðŸ“¦</div>

<div id="ordersContainer"></div>

<script>
let orders = JSON.parse(localStorage.getItem("orders")) || [];
let container = document.getElementById("ordersContainer");

if(orders.length === 0){
    container.innerHTML = `
        <div class="empty">
            <h3>No orders yet</h3>
            <p>Orders placed by users will appear here</p>
        </div>`;
}

/* SHOW LATEST FIRST */
orders.forEach(order => {

    let itemsHtml = "";
    order.items.forEach(i=>{
        itemsHtml += `${i.name} Ã— ${i.qty} kg<br>`;
    });

    let statusClass = order.status === "Delivered" ? "delivered" : "new";
    let disabled = order.status === "Delivered" ? "disabled" : "";

    container.innerHTML += `
    <div class="order-card">
        <h4>Order #${order.id}</h4>
        <p><b>Date:</b> ${order.date}</p>

        <p><b>Name:</b> ${order.customer.name}</p>
        <p><b>Mobile:</b> ${order.customer.mobile}</p>
        <p><b>Address:</b> ${order.customer.address}</p>

        <div class="items">${itemsHtml}</div>

        <p><b>Total:</b> â‚¹${order.total}</p>

        <div class="status ${statusClass}">
            Status: ${order.status}
        </div>

        <button class="btn" ${disabled}
            onclick="markDelivered('${order.id}')">
            Mark as Delivered
        </button>
    </div>`;
});

function markDelivered(orderId){
    orders = orders.map(o=>{
        if(o.id === orderId){
            o.status = "Delivered";
        }
        return o;
    });

    localStorage.setItem("orders", JSON.stringify(orders));
    location.reload();
}
</script>

</body>
</html>
