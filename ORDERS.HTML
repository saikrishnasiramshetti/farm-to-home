<!DOCTYPE html>
<html>
<head>
<title>My Orders</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#f5f7f6;
    padding-bottom:80px;
}
.header{
    background:linear-gradient(135deg,#1aad19,#7ed957);
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
}
.order{
    background:white;
    margin:15px;
    padding:15px;
    border-radius:15px;
    box-shadow:0 8px 16px rgba(0,0,0,0.1);
}
.order h4{
    margin-top:0;
    color:#1aad19;
}
.items{
    background:#f4f7f5;
    padding:10px;
    border-radius:10px;
    margin:10px 0;
    font-size:14px;
}
.address{
    font-size:14px;
    color:#555;
}
.status{
    font-weight:bold;
    margin-top:10px;
}
.status.new{ color:#ff9800; }
.status.delivered{ color:#1aad19; }

.empty{
    text-align:center;
    margin-top:60px;
    color:#777;
}

.bottom-nav{
    position:fixed;
    bottom:0;
    width:100%;
    background:white;
    display:flex;
    justify-content:space-around;
    padding:12px 0;
    box-shadow:0 -4px 10px rgba(0,0,0,0.1);
}
.bottom-nav a{
    text-decoration:none;
    color:#1aad19;
    font-weight:bold;
}
.bottom-nav a.active{
    border-top:3px solid #1aad19;
}
</style>
</head>

<body>

<div class="header">My Orders üì¶</div>

<div id="ordersContainer"></div>

<div class="bottom-nav">
    <a href="home.html">üè† Home</a>
    <a href="cart.html">üõí Cart</a>
    <a href="orders.html" class="active">üì¶ Orders</a>
</div>






<script>
let allOrders = JSON.parse(localStorage.getItem("orders")) || [];
let loggedMobile = localStorage.getItem("loggedInUser");
let container = document.getElementById("ordersContainer");

// FILTER ONLY LOGGED-IN USER ORDERS
let userOrders = allOrders.filter(o =>
    o.customer && o.customer.mobile === loggedMobile
);

if(userOrders.length === 0){
    container.innerHTML = `
        <div class="empty">
            <h3>No orders yet</h3>
            <p>Your orders will appear here</p>
        </div>
    `;
}else{
    userOrders.forEach(o => {

        let itemsHtml = "";
        o.items.forEach(i => {
            itemsHtml += `${i.name} √ó ${i.qty} kg<br>`;
        });

        let statusClass = o.status === "Delivered" ? "delivered" : "new";

        container.innerHTML += `
            <div class="order">
                <h4>Order #${o.id}</h4>
                <p>Date: ${o.date}</p>

                <div class="items">
                    ${itemsHtml}
                </div>

                <div class="address">
                    <b>Delivery Address:</b><br>
                    ${o.customer.name}<br>
                    ${o.customer.mobile}<br>
                    ${o.customer.address}
                </div>

                <div class="status ${statusClass}">
                    Status: ${o.status}
                </div>
            </div>
        `;
    });
}
</script>


</body>
</html>
